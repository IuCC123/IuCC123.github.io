<!DOCTYPE html>
<head>
    <title>IuCC</title>
    <link rel="stylesheet" href="index.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r123/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanta/0.5.24/vanta.halo.min.js"></script>
</head>
<body>
    <div id="halo">
        <button onclick="toggleDvd()">toggle dvd</button>
        <center>
            <a id="name">IuCC</a><br>
            <a id="time">Loading...</a><br>
            <a id="footer">made with ðŸ’– from ðŸ‡³ðŸ‡±</a>
        </center>
        <div id="dvd" hidden></div>
    </div>
    
</body>
<script>
    var dvdEnabled = false;
    function toggleDvd(){
        dvdEnabled = !dvdEnabled
        if(dvdEnabled === false){
            document.getElementById('dvd').hidden = true;
        }else{
            document.getElementById('dvd').hidden = false;
        }
    }
    //halo effect
    VANTA.HALO({
        el: "#halo",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00
    });

    //time
    function calcTime(offset) {
        var d = new Date();
        var utc = d.getTime() + (d.getTimezoneOffset() * 60000);
        var nd = new Date(utc + (3600000*offset));
        return "my local time is: "+ nd.toLocaleString();
    }
    setInterval(function (){
        document.getElementById("time").innerHTML = calcTime('+2.0')
    }, 10)

    //dvd
    let x = 0,
    y = 0,
    dirX = 1,
    dirY = 1;
    const speed = 5;
    const pallete = ["#ff8800", "#e124ff", "#6a19ff", "#ff2188"];
    let dvd = document.getElementById("dvd");
    dvd.style.backgroundColor = pallete[0];
    let prevColorChoiceIndex = 0;
    let black = document.getElementById("black");
    const dvdWidth = dvd.clientWidth;
    const dvdHeight = dvd.clientHeight;

    function getNewRandomColor() {
        const currentPallete = [...pallete]
        currentPallete.splice(prevColorChoiceIndex,1)
        const colorChoiceIndex = Math.floor(Math.random() * currentPallete.length);
        prevColorChoiceIndex = colorChoiceIndex<prevColorChoiceIndex?colorChoiceIndex:colorChoiceIndex+1;
        const colorChoice = currentPallete[colorChoiceIndex];
        return colorChoice;
    }
    function animate() {
        const screenHeight = document.body.clientHeight;
        const screenWidth = document.body.clientWidth;

        if (y + dvdHeight >= screenHeight || y < 0) {
            dirY *= -1;
            dvd.style.backgroundColor = getNewRandomColor();
        }
        if (x + dvdWidth >= screenWidth || x < 0) {
            dirX *= -1;

            dvd.style.backgroundColor = getNewRandomColor();
        }
        x += dirX * speed;
        y += dirY * speed;
        dvd.style.left = x + "px";
        dvd.style.top = y + "px";
        window.requestAnimationFrame(animate);
    }

    window.requestAnimationFrame(animate);

</script>